"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts";
exports.ids = ["pages/api/posts"];
exports.modules = {

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\posts.ts */ \"(api)/./src/pages/api/posts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/posts\",\n        pathname: \"/api/posts\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_posts_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBvc3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUNwb3N0cy50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN3RDtBQUN4RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsb0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG9EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3RfZGFhbmduLz9iNjQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXHBvc3RzLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcG9zdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wb3N0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/dynamoDB.ts":
/*!*****************************!*\
  !*** ./src/lib/dynamoDB.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n\naws_sdk__WEBPACK_IMPORTED_MODULE_0___default().config.update({\n    region: process.env.AWS_REGION,\n    accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY\n});\nconst dynamoDb = new (aws_sdk__WEBPACK_IMPORTED_MODULE_0___default().DynamoDB).DocumentClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dynamoDb);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2R5bmFtb0RCLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQjtBQUUxQkEscURBQVUsQ0FBQ0UsTUFBTSxDQUFDO0lBQ2RDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtJQUM5QkMsYUFBYUgsUUFBUUMsR0FBRyxDQUFDRyxpQkFBaUI7SUFDMUNDLGlCQUFpQkwsUUFBUUMsR0FBRyxDQUFDSyxxQkFBcUI7QUFDdEQ7QUFFQSxNQUFNQyxXQUFXLElBQUlYLHlEQUFZLENBQUNhLGNBQWM7QUFFaEQsaUVBQWVGLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0X2RhYW5nbi8uL3NyYy9saWIvZHluYW1vREIudHM/ZTc1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQVdTIGZyb20gJ2F3cy1zZGsnO1xyXG5cclxuQVdTLmNvbmZpZy51cGRhdGUoe1xyXG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OLFxyXG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lELFxyXG4gICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVlcclxufSk7XHJcblxyXG5jb25zdCBkeW5hbW9EYiA9IG5ldyBBV1MuRHluYW1vREIuRG9jdW1lbnRDbGllbnQoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGR5bmFtb0RiOyJdLCJuYW1lcyI6WyJBV1MiLCJjb25maWciLCJ1cGRhdGUiLCJyZWdpb24iLCJwcm9jZXNzIiwiZW52IiwiQVdTX1JFR0lPTiIsImFjY2Vzc0tleUlkIiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJkeW5hbW9EYiIsIkR5bmFtb0RCIiwiRG9jdW1lbnRDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/dynamoDB.ts\n");

/***/ }),

/***/ "(api)/./src/lib/posts.ts":
/*!**************************!*\
  !*** ./src/lib/posts.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPost: () => (/* binding */ createPost),\n/* harmony export */   deletePost: () => (/* binding */ deletePost),\n/* harmony export */   getAllPosts: () => (/* binding */ getAllPosts),\n/* harmony export */   getPost: () => (/* binding */ getPost),\n/* harmony export */   getPostsByCategoryAndPage: () => (/* binding */ getPostsByCategoryAndPage),\n/* harmony export */   incrementPostViews: () => (/* binding */ incrementPostViews),\n/* harmony export */   searchPosts: () => (/* binding */ searchPosts),\n/* harmony export */   updatePost: () => (/* binding */ updatePost)\n/* harmony export */ });\n/* harmony import */ var _dynamoDB__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamoDB */ \"(api)/./src/lib/dynamoDB.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_1__]);\nuuid__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /src/lib/posts.ts\n\n\n// 게시글 생성\nconst createPost = async (title, content, category)=>{\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)();\n    const params = {\n        TableName: \"PostsTable\",\n        Item: {\n            id: id,\n            title,\n            content,\n            category,\n            views: 0,\n            createdAt: new Date().toISOString()\n        }\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(params).promise();\n        return id; //생성된 게시글의 id 반환\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 생성 중 에러 발생: Error creating post\");\n    }\n};\n// 모든 게시물을 조회하는 함수\nconst getAllPosts = async ()=>{\n    const params = {\n        TableName: \"PostsTable\"\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scan(params).promise();\n        return {\n            items: result.Items\n        };\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 조회 중 에러 발생: Error fetching all posts\");\n    }\n};\n// 특정 게시글 조회 및 조회수 업데이트\nconst getPost = async (id)=>{\n    const getParams = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        }\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(getParams).promise();\n        if (result.Item) {\n            //조회수 업데이트 로직\n            return result.Item;\n        } else {\n            return null;\n        }\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 조회 중 에러 발생: Error fetching post\");\n    }\n};\n//카테고리별 게시글 가져오기 / 페이징 (추후 구현)\nconst getPostsByCategoryAndPage = async (category)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        IndexName: \"category-index\",\n        KeyConditionExpression: \"category = :category\",\n        ExpressionAttributeValues: {\n            \":category\": category\n        },\n        ScanIndexForward: true // 결과를 오름차순으로 정렬\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(params).promise();\n        return {\n            items: result.Items\n        };\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"카테고리별 게시글 조회 중 에러 발생: Error fetching posts by category\");\n    }\n};\n// 조회수 업데이트\nconst incrementPostViews = async (id)=>{\n    const updateviewsParams = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        },\n        UpdateExpression: \"set #views = #views + :val\",\n        ExpressionAttributeNames: {\n            \"#views\": \"views\" //views라는 실제 속성 이름을 '#views'라는 별칭으로 매핑\n        },\n        ExpressionAttributeValues: {\n            \":val\": 1\n        },\n        ReturnValues: \"UPDATED_NEW\"\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].update(updateviewsParams).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"조회수 업데이트 중 에러 발생: Error updating views\");\n    }\n};\n// 게시글 업데이트\nconst updatePost = async (id, title, content)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        },\n        UpdateExpression: \"set title = :title, content = :content\",\n        ExpressionAttributeValues: {\n            \":title\": title,\n            \":content\": content\n        },\n        ReturnValues: \"UPDATED_NEW\"\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].update(params).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 업데이트 중 에러 발생: Error updating post\");\n    }\n};\n// 게시글 삭제\nconst deletePost = async (id)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        }\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"][\"delete\"](params).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 삭제 중 에러 발생: Error deleting post\");\n    }\n};\n// 게시글 검색\n/** (만일 사용자 이벤트 데이터뿐만 아니라 posts도 대규모 데이터셋을 이용할 시,\r\n *  'scan'은 테이블 전체를 스캔하므로 성능 저하 우려.\r\n *  이 때 'scan' 대신, 글로벌 보조 인덱스(GSI)와 함께 'query' 연산 사용) */ const searchPosts = async (keyword)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        FilterExpression: \"contains(title, :keyword) or contains(content, :keyword)\",\n        ExpressionAttributeValues: {\n            \":keyword\": keyword\n        }\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scan(params).promise();\n        return {\n            items: result.Items\n        };\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 검색 중 에러 발생: Error searching posts\");\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlDO1FBQ2hCO1FBQ0FrQyxjQUFjO0lBQ2xCO0lBQ0EsSUFBRztRQUNILE1BQU12Qyx3REFBZSxDQUFDUSxRQUFRUSxPQUFPO0lBQ3JDLEVBQUUsT0FBTUMsT0FBTztRQUNYQyxRQUFRRCxLQUFLLENBQUNBO1FBQ2QsTUFBTSxJQUFJRSxNQUFNO0lBQ3BCO0FBQ0osRUFBRTtBQUVGLFNBQVM7QUFDRixNQUFNdUIsYUFBYSxPQUFPbkM7SUFDN0IsTUFBTUMsU0FBUztRQUNYQyxXQUFXO1FBQ1hrQixLQUFLO1lBQUVwQjtRQUFHO0lBQ2Q7SUFDQSxJQUFHO1FBQ0gsTUFBTVAsMkRBQWUsQ0FBQ1EsUUFBUVEsT0FBTztJQUNyQyxFQUFFLE9BQU1DLE9BQU87UUFDWEMsUUFBUUQsS0FBSyxDQUFDQTtRQUNkLE1BQU0sSUFBSUUsTUFBTTtJQUNwQjtBQUNKLEVBQUU7QUFFRixTQUFTO0FBQ1Q7O3NEQUVzRCxHQUUvQyxNQUFNeUIsY0FBYyxPQUFPQztJQUM5QixNQUFNckMsU0FBUztRQUNYQyxXQUFXO1FBQ1hxQyxrQkFBa0I7UUFDbEJkLDJCQUEyQjtZQUN2QixZQUFZYTtRQUNoQjtJQUNKO0lBRUEsSUFBSTtRQUNBLE1BQU14QixTQUFTLE1BQU1yQixzREFBYSxDQUFDUSxRQUFRUSxPQUFPO1FBQ2xELE9BQU87WUFDSE8sT0FBT0YsT0FBT0csS0FBSztRQUV2QjtJQUNKLEVBQUUsT0FBT1AsT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUNBO1FBQ2QsTUFBTSxJQUFJRSxNQUFNO0lBQ3BCO0FBQ0osRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3RfZGFhbmduLy4vc3JjL2xpYi9wb3N0cy50cz81MzA2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9zcmMvbGliL3Bvc3RzLnRzXHJcblxyXG5pbXBvcnQgZHluYW1vRGIgZnJvbSBcIi4vZHluYW1vREJcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XHJcblxyXG4vLyDqsozsi5zquIAg7IOd7ISxXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICBJdGVtOiB7XHJcbiAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICB2aWV3czogMCxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgIGF3YWl0IGR5bmFtb0RiLnB1dChwYXJhbXMpLnByb21pc2UoKTtcclxuICAgICAgIHJldHVybiBpZDsgLy/sg53shLHrkJwg6rKM7Iuc6riA7J2YIGlkIOuwmO2ZmFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyLnOq4gCDsg53shLEg7KSRIOyXkOufrCDrsJzsg506IEVycm9yIGNyZWF0aW5nIHBvc3QnKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIOuqqOuToCDqsozsi5zrrLzsnYQg7KGw7ZqM7ZWY64qUIO2VqOyImFxyXG5leHBvcnQgY29uc3QgZ2V0QWxsUG9zdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiAnUG9zdHNUYWJsZScsXHJcbiAgICAgICAgLy8g7LaU6rCA7KCB7J24IOyhsOqxtCDsl4bsnbQg66qo65OgIOuNsOydtO2EsOulvCDsobDtmoxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9EYi5zY2FuKHBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiByZXN1bHQuSXRlbXNcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyLnOq4gCDsobDtmowg7KSRIOyXkOufrCDrsJzsg506IEVycm9yIGZldGNoaW5nIGFsbCBwb3N0cycpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8g7Yq57KCVIOqyjOyLnOq4gCDsobDtmowg67CPIOyhsO2ajOyImCDsl4XrjbDsnbTtirhcclxuZXhwb3J0IGNvbnN0IGdldFBvc3QgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgZ2V0UGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEtleTogeyBpZCB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb0RiLmdldChnZXRQYXJhbXMpLnByb21pc2UoKTtcclxuICAgICAgICBpZihyZXN1bHQuSXRlbSkge1xyXG4gICAgICAgICAgICAvL+yhsO2ajOyImCDsl4XrjbDsnbTtirgg66Gc7KeBXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuSXRlbTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfqsozsi5zquIAg7KGw7ZqMIOykkSDsl5Drn6wg67Cc7IOdOiBFcnJvciBmZXRjaGluZyBwb3N0JylcclxuICAgIH1cclxufTtcclxuXHJcbi8v7Lm07YWM6rOg66as67OEIOqyjOyLnOq4gCDqsIDsoLjsmKTquLAgLyDtjpjsnbTsp5UgKOy2lO2bhCDqtaztmIQpXHJcbmV4cG9ydCBjb25zdCBnZXRQb3N0c0J5Q2F0ZWdvcnlBbmRQYWdlID0gYXN5bmMgKFxyXG4gICAgY2F0ZWdvcnk6IHN0cmluZ1xyXG4pID0+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICBJbmRleE5hbWU6ICdjYXRlZ29yeS1pbmRleCcsIC8vIOy5tO2FjOqzoOumrOyXkCDrlLDrpbgg6riA66Gc67KMIOuztOyhsCDsnbjrjbHsiqQoR1NJKVxyXG4gICAgICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICdjYXRlZ29yeSA9IDpjYXRlZ29yeScsXHJcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICAgICAnOmNhdGVnb3J5JzogY2F0ZWdvcnksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTY2FuSW5kZXhGb3J3YXJkOiB0cnVlIC8vIOqysOqzvOulvCDsmKTrpoTssKjsiJzsnLzroZwg7KCV66CsXHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vRGIucXVlcnkocGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXRlbXM6IHJlc3VsdC5JdGVtcyxcclxuICAgICAgICAgICAgLy8gTGFzdEV2YWx1YXRlZEtleeulvCDsoJzqsbAsIOqwhOuLqO2VnCDsobDtmowg6riw64ql66eMIOq1rO2YhFxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7Lm07YWM6rOg66as67OEIOqyjOyLnOq4gCDsobDtmowg7KSRIOyXkOufrCDrsJzsg506IEVycm9yIGZldGNoaW5nIHBvc3RzIGJ5IGNhdGVnb3J5Jyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyDsobDtmozsiJgg7JeF642w7J207Yq4XHJcbmV4cG9ydCBjb25zdCBpbmNyZW1lbnRQb3N0Vmlld3MgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgdXBkYXRldmlld3NQYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiAnUG9zdHNUYWJsZScsXHJcbiAgICAgICAgS2V5OiB7IGlkIH0sXHJcbiAgICAgICAgVXBkYXRlRXhwcmVzc2lvbjogJ3NldCAjdmlld3MgPSAjdmlld3MgKyA6dmFsJyxcclxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlTmFtZXM6IHtcclxuICAgICAgICAgICAgJyN2aWV3cyc6ICd2aWV3cycgLy92aWV3c+udvOuKlCDsi6TsoJwg7IaN7ISxIOydtOumhOydhCAnI3ZpZXdzJ+udvOuKlCDrs4Tsua3snLzroZwg66ek7ZWRXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7XHJcbiAgICAgICAgICAgICc6dmFsJzogMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgUmV0dXJuVmFsdWVzOiAnVVBEQVRFRF9ORVcnXHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZHluYW1vRGIudXBkYXRlKHVwZGF0ZXZpZXdzUGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7KGw7ZqM7IiYIOyXheuNsOydtO2KuCDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3IgdXBkYXRpbmcgdmlld3MnKVxyXG4gICAgfVxyXG59O1xyXG5cclxuLy8g6rKM7Iuc6riAIOyXheuNsOydtO2KuFxyXG5leHBvcnQgY29uc3QgdXBkYXRlUG9zdCA9IGFzeW5jIChpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICBLZXk6IHsgaWQgfSxcclxuICAgICAgICBVcGRhdGVFeHByZXNzaW9uOiAnc2V0IHRpdGxlID0gOnRpdGxlLCBjb250ZW50ID0gOmNvbnRlbnQnLFxyXG4gICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAgICAgJzp0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAnOmNvbnRlbnQnOiBjb250ZW50XHJcbiAgICAgICAgfSxcclxuICAgICAgICBSZXR1cm5WYWx1ZXM6ICdVUERBVEVEX05FVydcclxuICAgIH07XHJcbiAgICB0cnl7XHJcbiAgICBhd2FpdCBkeW5hbW9EYi51cGRhdGUocGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfqsozsi5zquIAg7JeF642w7J207Yq4IOykkSDsl5Drn6wg67Cc7IOdOiBFcnJvciB1cGRhdGluZyBwb3N0JylcclxuICAgIH1cclxufTtcclxuXHJcbi8vIOqyjOyLnOq4gCDsgq3soJxcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVBvc3QgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEtleTogeyBpZCB9XHJcbiAgICB9O1xyXG4gICAgdHJ5e1xyXG4gICAgYXdhaXQgZHluYW1vRGIuZGVsZXRlKHBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgfSBjYXRjaChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7Iuc6riAIOyCreygnCDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3IgZGVsZXRpbmcgcG9zdCcpXHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyDqsozsi5zquIAg6rKA7IOJXHJcbi8qKiAo66eM7J28IOyCrOyaqeyekCDsnbTrsqTtirgg642w7J207YSw67+Q66eMIOyVhOuLiOudvCBwb3N0c+uPhCDrjIDqt5zrqqgg642w7J207YSw7IWL7J2EIOydtOyaqe2VoCDsi5wsXHJcbiAqICAnc2NhbifsnYAg7YWM7J2067iUIOyghOyytOulvCDsiqTsupTtlZjrr4DroZwg7ISx64qlIOyggO2VmCDsmrDroKQuXHJcbiAqICDsnbQg65WMICdzY2FuJyDrjIDsi6AsIOq4gOuhnOuyjCDrs7TsobAg7J24642x7IqkKEdTSSnsmYAg7ZWo6ruYICdxdWVyeScg7Jew7IKwIOyCrOyaqSkgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hQb3N0cyA9IGFzeW5jIChrZXl3b3JkOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICBGaWx0ZXJFeHByZXNzaW9uOiAnY29udGFpbnModGl0bGUsIDprZXl3b3JkKSBvciBjb250YWlucyhjb250ZW50LCA6a2V5d29yZCknLFxyXG4gICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAgICAgJzprZXl3b3JkJzoga2V5d29yZFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9EYi5zY2FuKHBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiByZXN1bHQuSXRlbXNcclxuICAgICAgICAgICAgLy8gTGFzdEV2YWx1YXRlZEtleeulvCDsoJzqsbAsIOqwhOuLqO2VnCDsobDtmowg6riw64ql66eMIOq1rO2YhFxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7Iuc6riAIOqygOyDiSDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3Igc2VhcmNoaW5nIHBvc3RzJykgICAgICAgXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiZHluYW1vRGIiLCJ2NCIsInV1aWR2NCIsImNyZWF0ZVBvc3QiLCJ0aXRsZSIsImNvbnRlbnQiLCJjYXRlZ29yeSIsImlkIiwicGFyYW1zIiwiVGFibGVOYW1lIiwiSXRlbSIsInZpZXdzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHV0IiwicHJvbWlzZSIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwiZ2V0QWxsUG9zdHMiLCJyZXN1bHQiLCJzY2FuIiwiaXRlbXMiLCJJdGVtcyIsImdldFBvc3QiLCJnZXRQYXJhbXMiLCJLZXkiLCJnZXQiLCJnZXRQb3N0c0J5Q2F0ZWdvcnlBbmRQYWdlIiwiSW5kZXhOYW1lIiwiS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMiLCJTY2FuSW5kZXhGb3J3YXJkIiwicXVlcnkiLCJpbmNyZW1lbnRQb3N0Vmlld3MiLCJ1cGRhdGV2aWV3c1BhcmFtcyIsIlVwZGF0ZUV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlTmFtZXMiLCJSZXR1cm5WYWx1ZXMiLCJ1cGRhdGUiLCJ1cGRhdGVQb3N0IiwiZGVsZXRlUG9zdCIsImRlbGV0ZSIsInNlYXJjaFBvc3RzIiwia2V5d29yZCIsIkZpbHRlckV4cHJlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/posts.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/posts.ts":
/*!********************************!*\
  !*** ./src/pages/api/posts.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_posts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/posts */ \"(api)/./src/lib/posts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_posts__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_posts__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /src/pages/api/posts.ts\n/** API 라우트 */ \nasync function handler(req, res) {\n    try {\n        if (req.method === \"POST\") {\n            //게시글 생성\n            const { title, content, category } = req.body;\n            const postId = await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.createPost)(title, content, category);\n            res.status(201).json({\n                message: \"게시글 생성 완료: Create Post\",\n                id: postId\n            }); // 게시글 id 포함하여 반환\n        } else if (req.method === \"GET\") {\n            //게시글 조회\n            const { category, keyword } = req.query;\n            const categoryValue = Array.isArray(category) ? category[0] : category;\n            if (keyword) {\n                // 키워드로 게시글 검색\n                const postsByKeyword = await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.searchPosts)(keyword);\n                res.status(200).json(postsByKeyword);\n            } else if (categoryValue) {\n                // 카테고리별 게시물 반환\n                const postsByCategory = await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.getPostsByCategoryAndPage)(categoryValue);\n                res.status(200).json(postsByCategory);\n            } else {\n                // 모든 게시물 반환\n                const allPosts = await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.getAllPosts)();\n                res.status(200).json(allPosts);\n            }\n        } else {\n            console.log(\"Method not allowed for this request:\", req.method);\n            res.setHeader(\"Allow\", [\n                \"POST\",\n                \"GET\",\n                \"PUT\",\n                \"DELETE\"\n            ]);\n            res.status(405).end(`Method ${req.method} Not Allowed`);\n        }\n    } catch (error) {\n        if (error instanceof Error) {\n            //오류가 Error 인스턴스인 경우\n            res.status(500).json({\n                message: `서버 오류: ${error.message}`\n            });\n        } else {\n            //오류 타입이 불명확한 경우\n            res.status(500).json({\n                message: \"서버 오류: Server Error\"\n            });\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3Bvc3RzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsMEJBQTBCO0FBRTFCLFlBQVksR0FFcUY7QUFFbEYsZUFBZUksUUFBU0MsR0FBbUIsRUFBRUMsR0FBb0I7SUFFNUUsSUFBSTtRQUNBLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1lBQ3ZCLFFBQVE7WUFDUixNQUFNLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUUsR0FBR0wsSUFBSU0sSUFBSTtZQUM3QyxNQUFNQyxTQUFTLE1BQU1aLHNEQUFVQSxDQUFDUSxPQUFPQyxTQUFTQztZQUNoREosSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBMEJDLElBQUlKO1lBQU8sSUFBRyxpQkFBaUI7UUFDN0YsT0FBTyxJQUFJUCxJQUFJRSxNQUFNLEtBQUssT0FBTztZQUM3QixRQUFRO1lBQ1IsTUFBTSxFQUFFRyxRQUFRLEVBQUVPLE9BQU8sRUFBRSxHQUFHWixJQUFJYSxLQUFLO1lBQ3ZDLE1BQU1DLGdCQUFnQkMsTUFBTUMsT0FBTyxDQUFDWCxZQUFZQSxRQUFRLENBQUMsRUFBRSxHQUFHQTtZQUU5RCxJQUFJTyxTQUFTO2dCQUNULGNBQWM7Z0JBQ2QsTUFBTUssaUJBQWlCLE1BQU1uQix1REFBV0EsQ0FBQ2M7Z0JBQ3pDWCxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDUTtZQUN6QixPQUFPLElBQUlILGVBQWU7Z0JBQ3RCLGVBQWU7Z0JBQ2YsTUFBTUksa0JBQWtCLE1BQU1yQixxRUFBeUJBLENBQUNpQjtnQkFDeERiLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNTO1lBQ3pCLE9BQU87Z0JBQ0gsWUFBWTtnQkFDWixNQUFNQyxXQUFXLE1BQU12Qix1REFBV0E7Z0JBQ2xDSyxJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDVTtZQUN6QjtRQUNKLE9BQU87WUFDSEMsUUFBUUMsR0FBRyxDQUFDLHdDQUF3Q3JCLElBQUlFLE1BQU07WUFDOURELElBQUlxQixTQUFTLENBQUMsU0FBUztnQkFBQztnQkFBUTtnQkFBTztnQkFBTzthQUFTO1lBQ3ZEckIsSUFBSU8sTUFBTSxDQUFDLEtBQUtlLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRXZCLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDMUQ7SUFDSixFQUFFLE9BQU9zQixPQUFPO1FBQ1osSUFBSUEsaUJBQWlCQyxPQUFPO1lBQ3hCLG9CQUFvQjtZQUNwQnhCLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVMsQ0FBQyxPQUFPLEVBQUVjLE1BQU1kLE9BQU8sQ0FBQyxDQUFDO1lBQUE7UUFDN0QsT0FBTztZQUNILGdCQUFnQjtZQUNoQlQsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFxQjtRQUN6RDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0X2RhYW5nbi8uL3NyYy9wYWdlcy9hcGkvcG9zdHMudHM/NmFlMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvc3JjL3BhZ2VzL2FwaS9wb3N0cy50c1xyXG5cclxuLyoqIEFQSSDrnbzsmrDtirggKi9cclxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBjcmVhdGVQb3N0LCBnZXRBbGxQb3N0cywgZ2V0UG9zdHNCeUNhdGVnb3J5QW5kUGFnZSwgc2VhcmNoUG9zdHMgfSBmcm9tICcuLi8uLi9saWIvcG9zdHMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICAgICAgICAgIC8v6rKM7Iuc6riAIOyDneyEsVxyXG4gICAgICAgICAgICBjb25zdCB7IHRpdGxlLCBjb250ZW50LCBjYXRlZ29yeSB9ID0gcmVxLmJvZHk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RJZCA9IGF3YWl0IGNyZWF0ZVBvc3QodGl0bGUsIGNvbnRlbnQsIGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAn6rKM7Iuc6riAIOyDneyEsSDsmYTro4w6IENyZWF0ZSBQb3N0JywgaWQ6IHBvc3RJZCB9KTsvLyDqsozsi5zquIAgaWQg7Y+s7ZWo7ZWY7JesIOuwmO2ZmFxyXG4gICAgICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgICAgICAgLy/qsozsi5zquIAg7KGw7ZqMXHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2F0ZWdvcnksIGtleXdvcmQgfSA9IHJlcS5xdWVyeTtcclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlWYWx1ZSA9IEFycmF5LmlzQXJyYXkoY2F0ZWdvcnkpID8gY2F0ZWdvcnlbMF0gOiBjYXRlZ29yeTtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXl3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDtgqTsm4zrk5zroZwg6rKM7Iuc6riAIOqygOyDiVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zdHNCeUtleXdvcmQgPSBhd2FpdCBzZWFyY2hQb3N0cyhrZXl3b3JkIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwb3N0c0J5S2V5d29yZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8g7Lm07YWM6rOg66as67OEIOqyjOyLnOusvCDrsJjtmZhcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc3RzQnlDYXRlZ29yeSA9IGF3YWl0IGdldFBvc3RzQnlDYXRlZ29yeUFuZFBhZ2UoY2F0ZWdvcnlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwb3N0c0J5Q2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g66qo65OgIOqyjOyLnOusvCDrsJjtmZhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFBvc3RzID0gYXdhaXQgZ2V0QWxsUG9zdHMoKTtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFsbFBvc3RzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXRob2Qgbm90IGFsbG93ZWQgZm9yIHRoaXMgcmVxdWVzdDonLCByZXEubWV0aG9kKTtcclxuICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ1BPU1QnLCAnR0VUJywgJ1BVVCcsICdERUxFVEUnXSk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAvL+yYpOulmOqwgCBFcnJvciDsnbjsiqTthLTsiqTsnbgg6rK97JqwXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogYOyEnOuyhCDsmKTrpZg6ICR7ZXJyb3IubWVzc2FnZX1gfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy/smKTrpZgg7YOA7J6F7J20IOu2iOuqhe2Zle2VnCDqsr3smrBcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAn7ISc67KEIOyYpOulmDogU2VydmVyIEVycm9yJ30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJjcmVhdGVQb3N0IiwiZ2V0QWxsUG9zdHMiLCJnZXRQb3N0c0J5Q2F0ZWdvcnlBbmRQYWdlIiwic2VhcmNoUG9zdHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwidGl0bGUiLCJjb250ZW50IiwiY2F0ZWdvcnkiLCJib2R5IiwicG9zdElkIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJpZCIsImtleXdvcmQiLCJxdWVyeSIsImNhdGVnb3J5VmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJwb3N0c0J5S2V5d29yZCIsInBvc3RzQnlDYXRlZ29yeSIsImFsbFBvc3RzIiwiY29uc29sZSIsImxvZyIsInNldEhlYWRlciIsImVuZCIsImVycm9yIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/posts.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();