"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts/[id]";
exports.ids = ["pages/api/posts/[id]"];
exports.modules = {

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts%5C%5Bid%5D.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts%5C%5Bid%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\posts\\[id].ts */ \"(api)/./src/pages/api/posts/[id].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/posts/[id]\",\n        pathname: \"/api/posts/[id]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_posts_id_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBvc3RzJTJGJTVCaWQlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q3Bvc3RzJTVDJTVCaWQlNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHVEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx1REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0X2RhYW5nbi8/YzkzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxwb3N0c1xcXFxbaWRdLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcG9zdHMvW2lkXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Bvc3RzL1tpZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts%5C%5Bid%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/dynamoDB.ts":
/*!*****************************!*\
  !*** ./src/lib/dynamoDB.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n\naws_sdk__WEBPACK_IMPORTED_MODULE_0___default().config.update({\n    region: process.env.AWS_REGION,\n    accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY\n});\nconst dynamoDb = new (aws_sdk__WEBPACK_IMPORTED_MODULE_0___default().DynamoDB).DocumentClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dynamoDb);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2R5bmFtb0RCLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQjtBQUUxQkEscURBQVUsQ0FBQ0UsTUFBTSxDQUFDO0lBQ2RDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtJQUM5QkMsYUFBYUgsUUFBUUMsR0FBRyxDQUFDRyxpQkFBaUI7SUFDMUNDLGlCQUFpQkwsUUFBUUMsR0FBRyxDQUFDSyxxQkFBcUI7QUFDdEQ7QUFFQSxNQUFNQyxXQUFXLElBQUlYLHlEQUFZLENBQUNhLGNBQWM7QUFFaEQsaUVBQWVGLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0X2RhYW5nbi8uL3NyYy9saWIvZHluYW1vREIudHM/ZTc1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQVdTIGZyb20gJ2F3cy1zZGsnO1xyXG5cclxuQVdTLmNvbmZpZy51cGRhdGUoe1xyXG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OLFxyXG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lELFxyXG4gICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVlcclxufSk7XHJcblxyXG5jb25zdCBkeW5hbW9EYiA9IG5ldyBBV1MuRHluYW1vREIuRG9jdW1lbnRDbGllbnQoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGR5bmFtb0RiOyJdLCJuYW1lcyI6WyJBV1MiLCJjb25maWciLCJ1cGRhdGUiLCJyZWdpb24iLCJwcm9jZXNzIiwiZW52IiwiQVdTX1JFR0lPTiIsImFjY2Vzc0tleUlkIiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJkeW5hbW9EYiIsIkR5bmFtb0RCIiwiRG9jdW1lbnRDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/dynamoDB.ts\n");

/***/ }),

/***/ "(api)/./src/lib/posts.ts":
/*!**************************!*\
  !*** ./src/lib/posts.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPost: () => (/* binding */ createPost),\n/* harmony export */   deletePost: () => (/* binding */ deletePost),\n/* harmony export */   getAllPosts: () => (/* binding */ getAllPosts),\n/* harmony export */   getPost: () => (/* binding */ getPost),\n/* harmony export */   getPostsByCategoryAndPage: () => (/* binding */ getPostsByCategoryAndPage),\n/* harmony export */   incrementPostViews: () => (/* binding */ incrementPostViews),\n/* harmony export */   searchPosts: () => (/* binding */ searchPosts),\n/* harmony export */   updatePost: () => (/* binding */ updatePost)\n/* harmony export */ });\n/* harmony import */ var _dynamoDB__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamoDB */ \"(api)/./src/lib/dynamoDB.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_1__]);\nuuid__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /src/lib/posts.ts\n\n\n// 게시글 생성\nconst createPost = async (title, content, category)=>{\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)();\n    const params = {\n        TableName: \"PostsTable\",\n        Item: {\n            id: id,\n            title,\n            content,\n            category,\n            views: 0,\n            createdAt: new Date().toISOString()\n        }\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(params).promise();\n        return id; //생성된 게시글의 id 반환\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 생성 중 에러 발생: Error creating post\");\n    }\n};\n// 모든 게시물을 조회하는 함수\nconst getAllPosts = async ()=>{\n    const params = {\n        TableName: \"PostsTable\"\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scan(params).promise();\n        return {\n            items: result.Items\n        };\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 조회 중 에러 발생: Error fetching all posts\");\n    }\n};\n// 특정 게시글 조회 및 조회수 업데이트\nconst getPost = async (id)=>{\n    const getParams = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        }\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(getParams).promise();\n        if (result.Item) {\n            //조회수 업데이트 로직\n            return result.Item;\n        } else {\n            return null;\n        }\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 조회 중 에러 발생: Error fetching post\");\n    }\n};\n//카테고리별 게시글 가져오기 / 페이징 (추후 구현)\nconst getPostsByCategoryAndPage = async (category)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        IndexName: \"category-index\",\n        KeyConditionExpression: \"category = :category\",\n        ExpressionAttributeValues: {\n            \":category\": category\n        },\n        ScanIndexForward: true // 결과를 오름차순으로 정렬\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(params).promise();\n        return {\n            items: result.Items\n        };\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"카테고리별 게시글 조회 중 에러 발생: Error fetching posts by category\");\n    }\n};\n// 조회수 업데이트\nconst incrementPostViews = async (id)=>{\n    const updateviewsParams = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        },\n        UpdateExpression: \"set #views = #views + :val\",\n        ExpressionAttributeNames: {\n            \"#views\": \"views\" //views라는 실제 속성 이름을 '#views'라는 별칭으로 매핑\n        },\n        ExpressionAttributeValues: {\n            \":val\": 1\n        },\n        ReturnValues: \"UPDATED_NEW\"\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].update(updateviewsParams).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"조회수 업데이트 중 에러 발생: Error updating views\");\n    }\n};\n// 게시글 업데이트\nconst updatePost = async (id, title, content)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        },\n        UpdateExpression: \"set title = :title, content = :content\",\n        ExpressionAttributeValues: {\n            \":title\": title,\n            \":content\": content\n        },\n        ReturnValues: \"UPDATED_NEW\"\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].update(params).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 업데이트 중 에러 발생: Error updating post\");\n    }\n};\n// 게시글 삭제\nconst deletePost = async (id)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        Key: {\n            id\n        }\n    };\n    try {\n        await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"][\"delete\"](params).promise();\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 삭제 중 에러 발생: Error deleting post\");\n    }\n};\n// 게시글 검색\n/** (만일 사용자 이벤트 데이터뿐만 아니라 posts도 대규모 데이터셋을 이용할 시,\r\n *  'scan'은 테이블 전체를 스캔하므로 성능 저하 우려.\r\n *  이 때 'scan' 대신, 글로벌 보조 인덱스(GSI)와 함께 'query' 연산 사용) */ const searchPosts = async (keyword)=>{\n    const params = {\n        TableName: \"PostsTable\",\n        FilterExpression: \"contains(title, :keyword) or contains(content, :keyword)\",\n        ExpressionAttributeValues: {\n            \":keyword\": keyword\n        }\n    };\n    try {\n        const result = await _dynamoDB__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scan(params).promise();\n        return result.Items;\n    } catch (error) {\n        console.error(error);\n        throw new Error(\"게시글 검색 중 에러 발생: Error searching posts\");\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3Bvc3RzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxvQkFBb0I7QUFFYztBQUNFO0FBRXBDLFNBQVM7QUFDRixNQUFNRyxhQUFhLE9BQU9DLE9BQWVDLFNBQWlCQztJQUM3RCxNQUFNQyxLQUFLTCx3Q0FBTUE7SUFDakIsTUFBTU0sU0FBUztRQUNYQyxXQUFXO1FBQ1hDLE1BQU07WUFDRkgsSUFBSUE7WUFDSkg7WUFDQUM7WUFDQUM7WUFDQUssT0FBTztZQUNQQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDckM7SUFDSjtJQUNBLElBQUk7UUFDRCxNQUFNZCxxREFBWSxDQUFDUSxRQUFRUSxPQUFPO1FBQ2xDLE9BQU9ULElBQUksZ0JBQWdCO0lBQzlCLEVBQUUsT0FBT1UsT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUNBO1FBQ2QsTUFBTSxJQUFJRSxNQUFNO0lBQ3BCO0FBQ0osRUFBRTtBQUVGLGtCQUFrQjtBQUNYLE1BQU1DLGNBQWM7SUFDdkIsTUFBTVosU0FBUztRQUNYQyxXQUFXO0lBRWY7SUFFQSxJQUFJO1FBQ0EsTUFBTVksU0FBUyxNQUFNckIsc0RBQWEsQ0FBQ1EsUUFBUVEsT0FBTztRQUNsRCxPQUFPO1lBQ0hPLE9BQU9GLE9BQU9HLEtBQUs7UUFDdkI7SUFDSixFQUFFLE9BQU9QLE9BQU87UUFDWkMsUUFBUUQsS0FBSyxDQUFDQTtRQUNkLE1BQU0sSUFBSUUsTUFBTTtJQUNwQjtBQUNKLEVBQUU7QUFFRix1QkFBdUI7QUFDaEIsTUFBTU0sVUFBVSxPQUFPbEI7SUFDMUIsTUFBTW1CLFlBQVk7UUFDZGpCLFdBQVc7UUFDWGtCLEtBQUs7WUFBRXBCO1FBQUc7SUFDZDtJQUVBLElBQUk7UUFDQSxNQUFNYyxTQUFTLE1BQU1yQixxREFBWSxDQUFDMEIsV0FBV1YsT0FBTztRQUNwRCxJQUFHSyxPQUFPWCxJQUFJLEVBQUU7WUFDWixhQUFhO1lBQ2IsT0FBT1csT0FBT1gsSUFBSTtRQUN0QixPQUFPO1lBQ0gsT0FBTztRQUNYO0lBQ0osRUFBRSxPQUFNTyxPQUFPO1FBQ1hDLFFBQVFELEtBQUssQ0FBQ0E7UUFDZCxNQUFNLElBQUlFLE1BQU07SUFDcEI7QUFDSixFQUFFO0FBRUYsOEJBQThCO0FBQ3ZCLE1BQU1VLDRCQUE0QixPQUNyQ3ZCO0lBRUEsTUFBTUUsU0FBUztRQUNYQyxXQUFXO1FBQ1hxQixXQUFXO1FBQ1hDLHdCQUF3QjtRQUN4QkMsMkJBQTJCO1lBQ3ZCLGFBQWExQjtRQUNqQjtRQUNBMkIsa0JBQWtCLEtBQUssZ0JBQWdCO0lBQzNDO0lBRUEsSUFBSTtRQUNBLE1BQU1aLFNBQVMsTUFBTXJCLHVEQUFjLENBQUNRLFFBQVFRLE9BQU87UUFDbkQsT0FBTztZQUNITyxPQUFPRixPQUFPRyxLQUFLO1FBRXZCO0lBQ0osRUFBRSxPQUFPUCxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQ0E7UUFDZCxNQUFNLElBQUlFLE1BQU07SUFDcEI7QUFDSixFQUFFO0FBRUYsV0FBVztBQUNKLE1BQU1nQixxQkFBcUIsT0FBTzVCO0lBQ3JDLE1BQU02QixvQkFBb0I7UUFDdEIzQixXQUFXO1FBQ1hrQixLQUFLO1lBQUVwQjtRQUFHO1FBQ1Y4QixrQkFBa0I7UUFDbEJDLDBCQUEwQjtZQUN0QixVQUFVLFFBQVEsc0NBQXNDO1FBQzVEO1FBQ0FOLDJCQUEyQjtZQUN2QixRQUFRO1FBQ1o7UUFDQU8sY0FBYztJQUNsQjtJQUVBLElBQUk7UUFDQSxNQUFNdkMsd0RBQWUsQ0FBQ29DLG1CQUFtQnBCLE9BQU87SUFDcEQsRUFBRSxPQUFPQyxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQ0E7UUFDZCxNQUFNLElBQUlFLE1BQU07SUFDcEI7QUFDSixFQUFFO0FBRUYsV0FBVztBQUNKLE1BQU1zQixhQUFhLE9BQU9sQyxJQUFZSCxPQUFlQztJQUN4RCxNQUFNRyxTQUFTO1FBQ1hDLFdBQVc7UUFDWGtCLEtBQUs7WUFBRXBCO1FBQUc7UUFDVjhCLGtCQUFrQjtRQUNsQkwsMkJBQTJCO1lBQ3ZCLFVBQVU1QjtZQUNWLFlBQVlDO1FBQ2hCO1FBQ0FrQyxjQUFjO0lBQ2xCO0lBQ0EsSUFBRztRQUNILE1BQU12Qyx3REFBZSxDQUFDUSxRQUFRUSxPQUFPO0lBQ3JDLEVBQUUsT0FBTUMsT0FBTztRQUNYQyxRQUFRRCxLQUFLLENBQUNBO1FBQ2QsTUFBTSxJQUFJRSxNQUFNO0lBQ3BCO0FBQ0osRUFBRTtBQUVGLFNBQVM7QUFDRixNQUFNdUIsYUFBYSxPQUFPbkM7SUFDN0IsTUFBTUMsU0FBUztRQUNYQyxXQUFXO1FBQ1hrQixLQUFLO1lBQUVwQjtRQUFHO0lBQ2Q7SUFDQSxJQUFHO1FBQ0gsTUFBTVAsMkRBQWUsQ0FBQ1EsUUFBUVEsT0FBTztJQUNyQyxFQUFFLE9BQU1DLE9BQU87UUFDWEMsUUFBUUQsS0FBSyxDQUFDQTtRQUNkLE1BQU0sSUFBSUUsTUFBTTtJQUNwQjtBQUNKLEVBQUU7QUFFRixTQUFTO0FBQ1Q7O3NEQUVzRCxHQUUvQyxNQUFNeUIsY0FBYyxPQUFPQztJQUM5QixNQUFNckMsU0FBUztRQUNYQyxXQUFXO1FBQ1hxQyxrQkFBa0I7UUFDbEJkLDJCQUEyQjtZQUN2QixZQUFZYTtRQUNoQjtJQUNKO0lBRUEsSUFBSTtRQUNBLE1BQU14QixTQUFTLE1BQU1yQixzREFBYSxDQUFDUSxRQUFRUSxPQUFPO1FBQ2xELE9BQU9LLE9BQU9HLEtBQUs7SUFDdkIsRUFBRSxPQUFPUCxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQ0E7UUFDZCxNQUFNLElBQUlFLE1BQU07SUFDcEI7QUFDSixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVzdF9kYWFuZ24vLi9zcmMvbGliL3Bvc3RzLnRzPzUzMDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gL3NyYy9saWIvcG9zdHMudHNcclxuXHJcbmltcG9ydCBkeW5hbW9EYiBmcm9tIFwiLi9keW5hbW9EQlwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcclxuXHJcbi8vIOqyjOyLnOq4gCDsg53shLFcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBvc3QgPSBhc3luYyAodGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEl0ZW06IHtcclxuICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgY29udGVudCxcclxuICAgICAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgIHZpZXdzOiAwLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0cnkge1xyXG4gICAgICAgYXdhaXQgZHluYW1vRGIucHV0KHBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgICAgcmV0dXJuIGlkOyAvL+yDneyEseuQnCDqsozsi5zquIDsnZggaWQg67CY7ZmYXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7Iuc6riAIOyDneyEsSDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3IgY3JlYXRpbmcgcG9zdCcpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8g66qo65OgIOqyjOyLnOusvOydhCDsobDtmoztlZjripQg7ZWo7IiYXHJcbmV4cG9ydCBjb25zdCBnZXRBbGxQb3N0cyA9IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICAvLyDstpTqsIDsoIHsnbgg7KGw6rG0IOyXhuydtCDrqqjrk6Ag642w7J207YSw66W8IOyhsO2ajFxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb0RiLnNjYW4ocGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXRlbXM6IHJlc3VsdC5JdGVtc1xyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7Iuc6riAIOyhsO2ajCDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3IgZmV0Y2hpbmcgYWxsIHBvc3RzJyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyDtirnsoJUg6rKM7Iuc6riAIOyhsO2ajCDrsI8g7KGw7ZqM7IiYIOyXheuNsOydtO2KuFxyXG5leHBvcnQgY29uc3QgZ2V0UG9zdCA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBnZXRQYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiAnUG9zdHNUYWJsZScsXHJcbiAgICAgICAgS2V5OiB7IGlkIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vRGIuZ2V0KGdldFBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgICAgIGlmKHJlc3VsdC5JdGVtKSB7XHJcbiAgICAgICAgICAgIC8v7KGw7ZqM7IiYIOyXheuNsOydtO2KuCDroZzsp4FcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyLnOq4gCDsobDtmowg7KSRIOyXkOufrCDrsJzsg506IEVycm9yIGZldGNoaW5nIHBvc3QnKVxyXG4gICAgfVxyXG59O1xyXG5cclxuLy/subTthYzqs6Drpqzrs4Qg6rKM7Iuc6riAIOqwgOyguOyYpOq4sCAvIO2OmOydtOynlSAo7LaU7ZuEIOq1rO2YhClcclxuZXhwb3J0IGNvbnN0IGdldFBvc3RzQnlDYXRlZ29yeUFuZFBhZ2UgPSBhc3luYyAoXHJcbiAgICBjYXRlZ29yeTogc3RyaW5nXHJcbikgPT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEluZGV4TmFtZTogJ2NhdGVnb3J5LWluZGV4JywgLy8g7Lm07YWM6rOg66as7JeQIOuUsOuluCDquIDroZzrsowg67O07KGwIOyduOuNseyKpChHU0kpXHJcbiAgICAgICAgS2V5Q29uZGl0aW9uRXhwcmVzc2lvbjogJ2NhdGVnb3J5ID0gOmNhdGVnb3J5JyxcclxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7XHJcbiAgICAgICAgICAgICc6Y2F0ZWdvcnknOiBjYXRlZ29yeSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNjYW5JbmRleEZvcndhcmQ6IHRydWUgLy8g6rKw6rO866W8IOyYpOumhOywqOyInOycvOuhnCDsoJXroKxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9EYi5xdWVyeShwYXJhbXMpLnByb21pc2UoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpdGVtczogcmVzdWx0Lkl0ZW1zLFxyXG4gICAgICAgICAgICAvLyBMYXN0RXZhbHVhdGVkS2V566W8IOygnOqxsCwg6rCE64uo7ZWcIOyhsO2ajCDquLDriqXrp4wg6rWs7ZiEXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsubTthYzqs6Drpqzrs4Qg6rKM7Iuc6riAIOyhsO2ajCDspJEg7JeQ65+sIOuwnOyDnTogRXJyb3IgZmV0Y2hpbmcgcG9zdHMgYnkgY2F0ZWdvcnknKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIOyhsO2ajOyImCDsl4XrjbDsnbTtirhcclxuZXhwb3J0IGNvbnN0IGluY3JlbWVudFBvc3RWaWV3cyA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB1cGRhdGV2aWV3c1BhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdQb3N0c1RhYmxlJyxcclxuICAgICAgICBLZXk6IHsgaWQgfSxcclxuICAgICAgICBVcGRhdGVFeHByZXNzaW9uOiAnc2V0ICN2aWV3cyA9ICN2aWV3cyArIDp2YWwnLFxyXG4gICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lczoge1xyXG4gICAgICAgICAgICAnI3ZpZXdzJzogJ3ZpZXdzJyAvL3ZpZXdz652864qUIOyLpOygnCDsho3shLEg7J2066aE7J2EICcjdmlld3Mn652864qUIOuzhOy5reycvOuhnCDrp6TtlZFcclxuICAgICAgICB9LFxyXG4gICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAgICAgJzp2YWwnOiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBSZXR1cm5WYWx1ZXM6ICdVUERBVEVEX05FVydcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBkeW5hbW9EYi51cGRhdGUodXBkYXRldmlld3NQYXJhbXMpLnByb21pc2UoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsobDtmozsiJgg7JeF642w7J207Yq4IOykkSDsl5Drn6wg67Cc7IOdOiBFcnJvciB1cGRhdGluZyB2aWV3cycpXHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyDqsozsi5zquIAg7JeF642w7J207Yq4XHJcbmV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKGlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEtleTogeyBpZCB9LFxyXG4gICAgICAgIFVwZGF0ZUV4cHJlc3Npb246ICdzZXQgdGl0bGUgPSA6dGl0bGUsIGNvbnRlbnQgPSA6Y29udGVudCcsXHJcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICAgICAnOnRpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICc6Y29udGVudCc6IGNvbnRlbnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIFJldHVyblZhbHVlczogJ1VQREFURURfTkVXJ1xyXG4gICAgfTtcclxuICAgIHRyeXtcclxuICAgIGF3YWl0IGR5bmFtb0RiLnVwZGF0ZShwYXJhbXMpLnByb21pc2UoKTtcclxuICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyLnOq4gCDsl4XrjbDsnbTtirgg7KSRIOyXkOufrCDrsJzsg506IEVycm9yIHVwZGF0aW5nIHBvc3QnKVxyXG4gICAgfVxyXG59O1xyXG5cclxuLy8g6rKM7Iuc6riAIOyCreygnFxyXG5leHBvcnQgY29uc3QgZGVsZXRlUG9zdCA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiAnUG9zdHNUYWJsZScsXHJcbiAgICAgICAgS2V5OiB7IGlkIH1cclxuICAgIH07XHJcbiAgICB0cnl7XHJcbiAgICBhd2FpdCBkeW5hbW9EYi5kZWxldGUocGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfqsozsi5zquIAg7IKt7KCcIOykkSDsl5Drn6wg67Cc7IOdOiBFcnJvciBkZWxldGluZyBwb3N0JylcclxuICAgIH1cclxufTtcclxuXHJcbi8vIOqyjOyLnOq4gCDqsoDsg4lcclxuLyoqICjrp4zsnbwg7IKs7Jqp7J6QIOydtOuypO2KuCDrjbDsnbTthLDrv5Drp4wg7JWE64uI6528IHBvc3Rz64+EIOuMgOq3nOuqqCDrjbDsnbTthLDshYvsnYQg7J207Jqp7ZWgIOyLnCxcclxuICogICdzY2FuJ+ydgCDthYzsnbTruJQg7KCE7LK066W8IOyKpOy6lO2VmOuvgOuhnCDshLHriqUg7KCA7ZWYIOyasOugpC5cclxuICogIOydtCDrlYwgJ3NjYW4nIOuMgOyLoCwg6riA66Gc67KMIOuztOyhsCDsnbjrjbHsiqQoR1NJKeyZgCDtlajqu5ggJ3F1ZXJ5JyDsl7DsgrAg7IKs7JqpKSAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFBvc3RzID0gYXN5bmMgKGtleXdvcmQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ1Bvc3RzVGFibGUnLFxyXG4gICAgICAgIEZpbHRlckV4cHJlc3Npb246ICdjb250YWlucyh0aXRsZSwgOmtleXdvcmQpIG9yIGNvbnRhaW5zKGNvbnRlbnQsIDprZXl3b3JkKScsXHJcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICAgICAnOmtleXdvcmQnOiBrZXl3b3JkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb0RiLnNjYW4ocGFyYW1zKS5wcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfqsozsi5zquIAg6rKA7IOJIOykkSDsl5Drn6wg67Cc7IOdOiBFcnJvciBzZWFyY2hpbmcgcG9zdHMnKSAgICAgICBcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJkeW5hbW9EYiIsInY0IiwidXVpZHY0IiwiY3JlYXRlUG9zdCIsInRpdGxlIiwiY29udGVudCIsImNhdGVnb3J5IiwiaWQiLCJwYXJhbXMiLCJUYWJsZU5hbWUiLCJJdGVtIiwidmlld3MiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwdXQiLCJwcm9taXNlIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJnZXRBbGxQb3N0cyIsInJlc3VsdCIsInNjYW4iLCJpdGVtcyIsIkl0ZW1zIiwiZ2V0UG9zdCIsImdldFBhcmFtcyIsIktleSIsImdldCIsImdldFBvc3RzQnlDYXRlZ29yeUFuZFBhZ2UiLCJJbmRleE5hbWUiLCJLZXlDb25kaXRpb25FeHByZXNzaW9uIiwiRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyIsIlNjYW5JbmRleEZvcndhcmQiLCJxdWVyeSIsImluY3JlbWVudFBvc3RWaWV3cyIsInVwZGF0ZXZpZXdzUGFyYW1zIiwiVXBkYXRlRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyIsIlJldHVyblZhbHVlcyIsInVwZGF0ZSIsInVwZGF0ZVBvc3QiLCJkZWxldGVQb3N0IiwiZGVsZXRlIiwic2VhcmNoUG9zdHMiLCJrZXl3b3JkIiwiRmlsdGVyRXhwcmVzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/posts.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/posts/[id].ts":
/*!*************************************!*\
  !*** ./src/pages/api/posts/[id].ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_posts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/posts */ \"(api)/./src/lib/posts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_posts__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_posts__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /pages/api/posts/[id].ts\n\nasync function handler(req, res) {\n    const { id } = req.query;\n    try {\n        if (req.method === \"GET\" && id) {\n            // 특정 게시글 조회 로직\n            const post = await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.getPost)(id);\n            if (post) {\n                await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.incrementPostViews)(id);\n                res.status(200).json(post);\n            } else {\n                res.status(404).json({\n                    message: \"게시글을 찾을 수 없습니다\"\n                });\n            }\n        } else if (req.method === \"PUT\" && id) {\n            //게시글 업데이트\n            const { title, content } = req.body;\n            await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.updatePost)(id, title, content);\n            res.status(200).json({\n                message: \"게시글 업데이트 완료: Update Post\"\n            });\n        } else if (req.method === \"DELETE\" && id) {\n            //게시글 삭제\n            await (0,_lib_posts__WEBPACK_IMPORTED_MODULE_0__.deletePost)(id);\n            res.status(200).json({\n                message: \"게시글 삭제 완료: Delete Post\"\n            });\n        } else {\n            console.log(\"Method not allowed for this request:\", req.method);\n            res.setHeader(\"Allow\", [\n                \"GET\",\n                \"PUT\",\n                \"DELETE\"\n            ]);\n            res.status(405).end(`Method ${req.method} Not Allowed`);\n        }\n    } catch (error) {\n        if (error instanceof Error) {\n            //오류가 Error 인스턴스인 경우\n            res.status(500).json({\n                message: `서버 오류: ${error.message}`\n            });\n        } else {\n            //오류 타입이 불명확한 경우\n            res.status(500).json({\n                message: \"서버 오류: Server Error\"\n            });\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3Bvc3RzL1tpZF0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSwyQkFBMkI7QUFHNkQ7QUFFekUsZUFBZUksUUFBU0MsR0FBbUIsRUFBRUMsR0FBb0I7SUFDNUUsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBR0YsSUFBSUcsS0FBSztJQUV4QixJQUFJO1FBQ0EsSUFBSUgsSUFBSUksTUFBTSxLQUFLLFNBQVNGLElBQUk7WUFDNUIsZUFBZTtZQUNmLE1BQU1HLE9BQU8sTUFBTVYsbURBQU9BLENBQUNPO1lBQzNCLElBQUlHLE1BQU07Z0JBQ04sTUFBTVQsOERBQWtCQSxDQUFDTTtnQkFDekJELElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNGO1lBQ3pCLE9BQU87Z0JBQ0hKLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLFNBQVM7Z0JBQWlCO1lBQ3JEO1FBQ0osT0FBTyxJQUFJUixJQUFJSSxNQUFNLEtBQUssU0FBU0YsSUFBSTtZQUNuQyxVQUFVO1lBQ1YsTUFBTSxFQUFFTyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUFHVixJQUFJVyxJQUFJO1lBQ25DLE1BQU1kLHNEQUFVQSxDQUFDSyxJQUFjTyxPQUFPQztZQUN0Q1QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUEwQjtRQUM5RCxPQUFPLElBQUlSLElBQUlJLE1BQU0sS0FBSyxZQUFZRixJQUFJO1lBQ3RDLFFBQVE7WUFDUixNQUFNSixzREFBVUEsQ0FBQ0k7WUFDakJELElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBd0I7UUFDNUQsT0FBTztZQUNISSxRQUFRQyxHQUFHLENBQUMsd0NBQXdDYixJQUFJSSxNQUFNO1lBQzlESCxJQUFJYSxTQUFTLENBQUMsU0FBUztnQkFBQztnQkFBTztnQkFBTzthQUFTO1lBQy9DYixJQUFJSyxNQUFNLENBQUMsS0FBS1MsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFZixJQUFJSSxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQzFEO0lBQ0osRUFBRSxPQUFPWSxPQUFPO1FBQ1osSUFBSUEsaUJBQWlCQyxPQUFPO1lBQ3hCLG9CQUFvQjtZQUNwQmhCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVMsQ0FBQyxPQUFPLEVBQUVRLE1BQU1SLE9BQU8sQ0FBQyxDQUFDO1lBQUE7UUFDN0QsT0FBTztZQUNILGdCQUFnQjtZQUNoQlAsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFxQjtRQUN6RDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0X2RhYW5nbi8uL3NyYy9wYWdlcy9hcGkvcG9zdHMvW2lkXS50cz9iMGE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9wYWdlcy9hcGkvcG9zdHMvW2lkXS50c1xyXG5cclxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBnZXRQb3N0LCBpbmNyZW1lbnRQb3N0Vmlld3MsIHVwZGF0ZVBvc3QsIGRlbGV0ZVBvc3QgfSBmcm9tICcuLi8uLi8uLi9saWIvcG9zdHMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJyAmJiBpZCkge1xyXG4gICAgICAgICAgICAvLyDtirnsoJUg6rKM7Iuc6riAIOyhsO2ajCDroZzsp4FcclxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IGdldFBvc3QoaWQgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgaWYgKHBvc3QpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGluY3JlbWVudFBvc3RWaWV3cyhpZCBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocG9zdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICfqsozsi5zquIDsnYQg7LC+7J2EIOyImCDsl4bsirXri4jri6QnIH0pO1xyXG4gICAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQVVQnICYmIGlkKSB7XHJcbiAgICAgICAgICAgIC8v6rKM7Iuc6riAIOyXheuNsOydtO2KuFxyXG4gICAgICAgICAgICBjb25zdCB7IHRpdGxlLCBjb250ZW50IH0gPSByZXEuYm9keTtcclxuICAgICAgICAgICAgYXdhaXQgdXBkYXRlUG9zdChpZCBhcyBzdHJpbmcsIHRpdGxlLCBjb250ZW50KTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAn6rKM7Iuc6riAIOyXheuNsOydtO2KuCDsmYTro4w6IFVwZGF0ZSBQb3N0J30pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScgJiYgaWQpIHtcclxuICAgICAgICAgICAgLy/qsozsi5zquIAg7IKt7KCcXHJcbiAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVBvc3QoaWQgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAn6rKM7Iuc6riAIOyCreygnCDsmYTro4w6IERlbGV0ZSBQb3N0J30pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXRob2Qgbm90IGFsbG93ZWQgZm9yIHRoaXMgcmVxdWVzdDonLCByZXEubWV0aG9kKTtcclxuICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQVVQnLCAnREVMRVRFJ10pO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgLy/smKTrpZjqsIAgRXJyb3Ig7J247Iqk7YS07Iqk7J24IOqyveyasFxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGDshJzrsoQg7Jik66WYOiAke2Vycm9yLm1lc3NhZ2V9YH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8v7Jik66WYIO2DgOyeheydtCDrtojrqoXtmZXtlZwg6rK97JqwXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ+yEnOuyhCDsmKTrpZg6IFNlcnZlciBFcnJvcid9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiZ2V0UG9zdCIsImluY3JlbWVudFBvc3RWaWV3cyIsInVwZGF0ZVBvc3QiLCJkZWxldGVQb3N0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsImlkIiwicXVlcnkiLCJtZXRob2QiLCJwb3N0Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ0aXRsZSIsImNvbnRlbnQiLCJib2R5IiwiY29uc29sZSIsImxvZyIsInNldEhlYWRlciIsImVuZCIsImVycm9yIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/posts/[id].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cposts%5C%5Bid%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();